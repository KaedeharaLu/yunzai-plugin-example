# KaedeharaLu和FichteHerbst的云崽js插件仓库
仓库内js插件无特殊说明可以在喵崽使用，标有```TRSS```的为TRSS可用插件，其它类型的崽请自行测试
发现bug或有好的建议，欢迎发起issue

# 插件列表
## 发言统计
因本人不再使用喵崽等其他云崽，因此不会再更新、维护该版本，如有更新意见，欢迎PR
### 使用
- 加载插件后自动运行，群友每发送一条消息会自动记录（不会过滤自己的消息）
- 发送 ``` #发言榜``` 可查看发言记录榜单，只会显示前30名的发言次数和发言次数占比
- 榜单记录文件在``` ./data/snots/```下，名称为```qq群号_snots.json```
- 可以修改代码中的```const topUsers = data.slice(0, 30);```中的“30”来改变榜单截取长度
- 发送 ``` #清除发言榜单 ```可清除当前群聊的记录文件
注：无判断是否超出qq发言长度限制，请自行判断

## 发言统计-TRSS
该js为“发言统计”插件的TRSS版本，使用方法和基本和上面一样
不同：增加新的设置，发送```#发言榜帮助```查看更多设置。
```
默认设置：
    榜单人数：20
    是否以转发形式发送：否
```

推荐通过```#发言榜设置转发0```开启榜单转发发送，防止榜单太长造成刷屏
 **注意：如果从旧版本升级上来，文件结构发生改变，要自行迁移。**
旧版结构：
```
./data/snots
        |-qq号1.json
        |-qq号2.json
        |-qq号3.json
        |-qq号4.json
```

新版结构：
```
./data/snots
        |-qq号1
        |   |-snots.json
        |   |-settings.json
        |-qq号1
            |-snots.json
            |-settings.json
```

其中，新的```snots.json```和旧版本的```qq号1.json```内容一模一样，```settngs.json```会自动创建，只需要按照结构将snots.json重命名并放入文件夹即可

## 反馈-TRSS
### 使用
- 发送```#反馈+反馈内容```即可自动记录反馈内容
- 反馈记录文件在```./data/feedback.json```
### 主人操作
- 发送```#查看反馈```则输出记录的反馈内容
- 发送```#清除反馈记录```则删除存在的feedback.json文件
- 以上操作均有检查文件是否存在的操作，一般不会出bug

## 自动更新NapCat
### 须知
- 目前由于NapCat的缺陷，自动重启不可用，再提示“更新完成”后，请手动重启NapCat程序。
- 当前该js插件仅适用于v2.0.0以后的版本，如果为1.x.x版本请先手动更新到v2.0.22（比较稳定）及以后的版本再使用本插件。
- 使用前请添加依赖pnpm add (axios，http-proxy-agent，https-proxy-agent，adm-zip) -w
  `pnpm add axios -w`
  `pnpm add http-proxy-agent -w`
  `pnpm add https-proxy-agent -w`
  `pnpm add adm-zip -w`
  
- 须在34行配置目录，例如：原先的运行目录是`E:\111\NapCat.Shell`，则填入`E:\\111\\NapCat.Shell`
- 目录的最后一级名称一定要为`NapCat.Shell`

### 使用方法
放入plugins/example文件夹中即可
```
介绍一下NapCat吧
NapCat为云崽的适配器，可以通过ws反向连接的方式连接应用端，可以直接扫码登录
由于是直接使用的ntqq的文件，模拟用户操作，封号/冻结的概率低
项目地址：[NapCatQQ](https://github.com/NapNeko/NapCatQQ)
```

## 简单彩票-TRSS

### 免责声明
- 该插件开源，且只是名字叫彩票，其中的词汇如“购买彩票”“卖彩票”均不需要任何货币，即无任何金钱交易，类似于比运气的插件。如果被用于金钱交易等行为，均与本人无关。
- 该插件开源，且只是名字叫彩票，其中的词汇如“购买彩票”“卖彩票”均不需要任何货币，即无任何金钱交易，类似于比运气的插件。如果被用于金钱交易等行为，均与本人无关。
- 该插件开源，且只是名字叫彩票，其中的词汇如“购买彩票”“卖彩票”均不需要任何货币，即无任何金钱交易，类似于比运气的插件。如果被用于金钱交易等行为，均与本人无关。


### 说明
#### 简介
该插件可以用来比一比群友的运气。该插件以记录用户数据，而不是群聊数据，以此实现多群互通，即一个用户在一个群聊“买”了“彩票”，在另一个群也可以查看。

#### 使用教程
0. “彩票”号码均为3位数，且范围在```100-999```
1. ```#购买彩票```
- ```#购买彩票```可以获得一个随机的彩票号码（不会重复），也可以发送```#购买彩票+xxx```（xxx替换成自己喜欢的三位数），如果已经被其他人“购买”会提醒不可“购买”。
- 如果已经“购买”过“彩票”，则会输出已经“购买”的信息。
2. ```#出卖彩票|#出售彩票|#售出彩票|#卖彩票```
- 同指令名字，就是丢掉已经获得的“彩票”
3. ```#彩票开奖```
- 该指令只有云崽主人可以使用，即开奖。会输出“中奖”的人
- 使用后会计入历史文件
- “开奖”后自动开启下一轮
4. ```#彩票历史```
- 即查看过去的记录，会显示参与人数、“中奖”号码等信息
5. ```#我的历史```
- 即查看自己过去参与的历史，会显示购买时间、是否中奖等信息
6. ```#我的彩票```
- 即显示当前已有的“彩票”
```
注意：
1.以上的诸如“彩票”“购买”等字眼打上双引号是为了说明并非真正的说明，不设计赌博、金钱交易
2.关于“彩票”信息输出时，如果不是在当前群聊“购买”的，不会显示群聊信息
3.历史输出时，最多输出20条记录，超出20条的话只显示最后20条
```

### bug
该插件未经严格测试，如有bug，请发起issue

## UAPI-TRSS
- 因为不存在对用户信息的处理，理论上云崽都可以使用，但是本人使用TRSS，其他云崽未测试。
- 发送```#UAPI帮助```查看帮助。
- api来自[TechCat](https://chcat.cn/)旗下的免费api接口[UAPI](https://uapis.cn/)。

### 功能
- ```#天气+城市``` 查询某地天气。
- ```#ping+空格+域名/ip``` 调用api进行ping操作。api服务器地址默认湖北，结果仅作参考。
- ```#ua一言``` 获取UAPI提供的一言。
- ```#热搜``` 查看多平台热搜榜前十。
- ```#随机表情+有兽焉/猫猫/二次元/坤坤/熊猫/外国人``` 获取对应的随机表情。